<!doctype html>
<html lang="pt-br" theme="system">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />

    <meta name="description" content="WPM Test" />
    <meta name="keywords" content="html, html5, css, css3, js, vue, vuejs, password-generator" />
    <meta name="robots" content="index" />
    <meta name="author" content="Modscleo4" />

    <title>WPM Test</title>

    <!-- Bootstrap 5.1.3 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">

    <!-- Font Awesome 4.7.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/themes/light.css" />
    <link rel="stylesheet" href="css/themes/dark.css" />

    <link rel="manifest" href="manifest.webmanifest" />

    <link rel="icon" href="favicon.png" />
</head>

<body>
    <script type="text/javascript" src="js/theme.js"></script>

    <div id="app">
        <div :style="{'--timer': `${Math.max(0, 100 * timer / initialTimer)}%`}" class="timer-bar"></div>

        <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModal"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"></h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="card-info">
                            <div class="stats-modal text-center">
                                <section>
                                    <h1 class="speed">{{ speed }} WPM</h2>
                                </section>

                                <section>
                                    <h2>Accuracy: <span class="accuracy" :class="{'good': accuracy >= 85, 'ok': accuracy >= 50 && accuracy < 85, 'bad': accuracy < 50}">{{ accuracy.toFixed(2) }} %</span></h2>
                                </section>

                                <section>
                                    <h3>Letters: <span class="right">{{ right }}</span> / <span class="wrong">{{ wrong }}</span></h3>
                                    <h3>Words: <span class="words-right">{{ wordsRight }}</span> / <span class="words-wrong">{{ wordsWrong }}</span></h3>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <header>
                <div class="stats">
                    <div class="main-stats">
                        <span class="speed">{{ speed }} WPM</span>
                        <span class="timer">{{ Math.round(timer / 10) }} s</span>
                    </div>

                    <div class="keytype-stats">
                        <span>
                        <span class="right">{{ right }}</span> / <span class="wrong">{{ wrong }}</span> chars
                        </span>
                        <span>
                            <span class="words-right">{{ wordsRight }}</span> / <span class="words-wrong">{{ wordsWrong }}</span> words
                        </span>
                    </div>
                </div>
            </header>

            <div class="typing-text">
                <span v-for="(word, i) in text_words" :id="`word_${i}`" :class="{'current': currentWord == i, 'right': currentWord > i && full_typed_text().split(' ')[i] === word, 'wrong': currentWord > i && full_typed_text().split(' ')[i] !== word}">
                    <template v-if="currentWord == i">
                        <span v-for="(letter, j) in word" :class="{'current': typed.length === j, 'right': typed.length >= (j + 1) && letterRight(j), 'wrong': typed.length > word.length || typed.length >= (j + 1) && !letterRight(j)}">{{ letter }}</span>
                    </template>

                    <template v-else>{{ word }}</template>
                </span>
            </div>

            <div class="input-wrapper">
                <input id="wpm_input" name="wpm_input" type="text" class="form-control" v-model="typed" placeholder="Type here." :readonly="!text || timer === 0" autofocus @input="calculateWrongChars" @keyup="keyup($event)" @keydown="keydown($event)" />
            </div>

            <div class="keyboard">
                <div class="row">
                    <span data-key="Q" class="key">Q</span>
                    <span data-key="W" class="key">W</span>
                    <span data-key="E" class="key">E</span>
                    <span data-key="R" class="key">R</span>
                    <span data-key="T" class="key">T</span>
                    <span data-key="Y" class="key">Y</span>
                    <span data-key="U" class="key">U</span>
                    <span data-key="I" class="key">I</span>
                    <span data-key="O" class="key">O</span>
                    <span data-key="P" class="key">P</span>
                </div>

                <div class="row">
                    <span data-key="A" class="key">A</span>
                    <span data-key="S" class="key">S</span>
                    <span data-key="D" class="key">D</span>
                    <span data-key="F" class="key">F</span>
                    <span data-key="G" class="key">G</span>
                    <span data-key="H" class="key">H</span>
                    <span data-key="J" class="key">J</span>
                    <span data-key="K" class="key">K</span>
                    <span data-key="L" class="key">L</span>
                </div>

                <div class="row">
                    <span data-key="Z" class="key">Z</span>
                    <span data-key="X" class="key">X</span>
                    <span data-key="C" class="key">C</span>
                    <span data-key="V" class="key">V</span>
                    <span data-key="B" class="key">B</span>
                    <span data-key="N" class="key">N</span>
                    <span data-key="M" class="key">M</span>
                    <span data-key="," class="key">,</span>
                    <span data-key="." class="key">.</span>
                </div>

                <div class="row">
                    <span data-key=" " class="key space"></span>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js"></script>

    <script type="module" src="js/main.js"></script>
</body>
</html>
